apiVersion: cilium.io/v2
kind: CiliumClusterwideNetworkPolicy
metadata:
  name: "allow-monitoring-internal"
  labels:
    {{- include "cilium-global-policies.labels" . | nindent 4 }}
spec:
  endpointSelector:
    matchLabels:
      'k8s:io.kubernetes.pod.namespace': 'monitoring'
  ingress:
  - fromEndpoints:
      - matchLabels:
          'k8s:io.kubernetes.pod.namespace': 'monitoring'
  egress:
  - toEndpoints:
      - matchLabels:
          'k8s:io.kubernetes.pod.namespace': 'monitoring'
  - toEntities:
      - "all"
