{{- $Values := index .Values "fluent-bit" -}}
{{- if not $Values.networkPolicy.enabled }}
apiVersion: "networking.k8s.io/v1"
kind: "NetworkPolicy"
metadata:
  name: syslog-rfc3164-fluent-bit
  namespace: {{ .Release.Namespace }}
spec:
  policyTypes:
    - "Ingress"
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: syslog-rfc3164
      app.kubernetes.io/name: fluent-bit
  ingress:
    - ports:
        - protocol: "TCP"
          port: 5140
{{- end }}
